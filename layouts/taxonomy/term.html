{{- define "main" -}}
  <div id="l-content-box" class="l-box l-box--full">
    <div id="l-content">
      <header class="page-header page-header--title-left">
        <div class="title">
          <hr>
            {{ partial "title/taxonomy.html" .Page }}
            {{ partial "title/subtitle.html" .Page }}
        </div>
      </header>
        {{ with .Content }}
          <div class="md md--sans md--margin-left md--h-serif md--list">
              {{- partial "replacements.html" . -}}
          </div>
        {{ end }}
      {{ with .Pages }}
      <nav class="card-nav card-nav--3 card-nav--top margin-left">
        <ul class="card-nav__list">
            {{ $n := len . }}
            {{ $col3halfs := 4 }}
            {{ $col1 := 6 }}
            {{ if le $n 10 }}
              {{ $col3halfs = 2 }}
            {{ end }}
            {{- range $index, $page := . -}}
                {{ if lt $index $col3halfs }}
                  <li class="card card--3halfs">{{- $page.Render "li-card-3halfs-col-img" -}}</li>
                {{ else if lt $index (add $col3halfs $col1) }}
                  <li class="card card--1">{{- $page.Render "li-card-1-col-img" -}}</li>
                {{ else }}
                  <li class="card card--1">{{- $page.Render "li-card-1-row-img" -}}</li>
                {{ end }}
            {{- end -}}
        </ul>
      </nav>
      {{ end }}
    </div>
    <footer class="page-footer page-footer--taxo">
        {{ partial "nav/taxonomies/site.html" . }}
    </footer>
  </div>
{{- end -}}

{{ define "footer" -}}
  <footer id="l-footer" class="l-box margin-left">
      {{- partial "footer/site.html" . -}}
  </footer>
{{ end -}}
